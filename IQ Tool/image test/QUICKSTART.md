# 快速启动指南 - ccm_test_3.py

## 安装依赖

```bash
pip install opencv-python numpy matplotlib scikit-image
```

## 运行程序

```bash
python ccm_test_3.py
```

## 5 分钟快速入门

### 标准模式（自动启动）
1. ✅ 程序启动显示标准 24 色色卡
2. 🎨 左侧：原始色卡 | 右侧：调整后色卡
3. 🎛️ 调整 CCM 参数（9 个滑块）
4. 📊 查看实时 Lab 值分析

### 手动图片模式
1. 📂 点击菜单 **File → Open Image**
2. 🖼️ 选择图片（JPG/PNG/BMP）
3. 🎯 自动检测 24 色块
4. ✏️ 调整方框位置和大小
5. 📈 实时查看 Lab 数据

## 操作示例

### 调整 CCM 参数
```
使用滑块：拖拽调整
使用按键：点击 +/- 增减 0.05
直接输入：点击输入框 → 输入数值 → Enter
```

### 调整方框
```
选择：点击方框（边框变红）
移动：拖拽选中的方框
调整大小：Shift + 拖拽
```

## 窗口说明

### 主窗口
- **左侧**：原始 24 色卡或用户图片
- **右侧**：调整后的图像
- **下方**：CCM 参数控制和统计信息

### 辅助窗口
- **Lab 分析窗**：实时显示每个色块的数据
  - L* (亮度)、a* (红-绿)、b* (黄-蓝)
  - ΔE (色差)、ΔC (色度差)、Sat (饱和度)

## 文件说明

| 文件 | 说明 |
|------|------|
| ccm_test_3.py | 主程序（本文件） |
| MANUAL_IMAGE_MODE.md | 手动模式详细指南 |
| CCM_TOOL_COMPLETE_GUIDE.md | 完整功能说明 |
| CHANGES.md | 版本更新记录 |

## 常见操作

| 需求 | 操作 |
|------|------|
| 打开图片 | Menu → File → Open Image |
| 调整色块位置 | 点击 → 拖拽 |
| 调整色块大小 | 点击 → Shift+拖拽 |
| 查看 Lab 值 | 打开 Lab 分析窗口（自动） |
| 重置参数 | 点击 "Reset Identity" 按钮 |
| 退出程序 | Menu → File → Exit 或关闭窗口 |

## 参数范围

| 参数 | 范围 | 默认值 |
|------|------|--------|
| R_r | 0.0 - 2.0 | 1.0 |
| R_g | -1.0 - 1.0 | 0.0 |
| R_b | -1.0 - 1.0 | 0.0 |
| G_r | -1.0 - 1.0 | 0.0 |
| G_g | 0.0 - 2.0 | 1.0 |
| G_b | -1.0 - 1.0 | 0.0 |
| B_r | -1.0 - 1.0 | 0.0 |
| B_g | -1.0 - 1.0 | 0.0 |
| B_b | 0.0 - 2.0 | 1.0 |

## 显示信息

### 统计面板（下方）
- **Avg ΔE**：平均色差（蓝色框）
- **Max ΔE**：最大色差（红色框）
- **Avg ΔC**：平均色度差（蓝色框）
- **Max ΔC**：最大色度差（红色框）
- **Avg SAT**：平均饱和度（红色框）

### ΔE 解释
| ΔE 范围 | 感受 |
|--------|------|
| < 1 | 几乎看不出 |
| 1-2 | 非常细微 |
| 2-3 | 仔细看才能看出 |
| 3-5 | 明显差异 |
| > 5 | 明显色偏 |

## 故障排除

### 问题：打不开文件对话框
**解决**：确保运行环境是 GUI（不是 SSH 或 headless）

### 问题：自动检测不准确
**解决**：使用高对比度的图片，或手动调整方框

### 问题：程序运行缓慢
**解决**：缩小图片分辨率到 1000×1000 以下

### 问题：Lab 窗口不显示
**解决**：检查是否被主窗口覆盖，或等待计算完成

## 下一步

- 📖 阅读 [MANUAL_IMAGE_MODE.md](MANUAL_IMAGE_MODE.md) 了解详细操作
- 📚 查看 [CCM_TOOL_COMPLETE_GUIDE.md](CCM_TOOL_COMPLETE_GUIDE.md) 获取完整功能说明
- 🔧 根据需要修改代码（如调整检测参数）

---

**提示**：首次运行时，Lab 分析窗口的计算可能需要 1-2 秒。
