## 簡介
ESP32-P4 內含圖像信號處理器 (ISP)，是由眾多影像處理演算法組成的流水線。ISP 從 DVP 攝像頭、MIPI-CSI 攝像頭或系統存儲處接收圖像資料，並通過 DMA 將處理後的圖像資料寫入系統存儲。ISP 需要與其他攝像頭控制器模組協同工作，無法獨立工作。
## 術語表
- MIPI-CSI：符合 MIPI 規範的高速串列攝像頭介面
- DVP：數位視訊平行介面，通常由 vsync、hsync、de 和 data 信號組成
- RAW：直接從圖像感測器輸出的未處理資料，通常分為 R、Gr、Gb 和 B 四個通道，按位寬分為 RAW8、RAW10、RAW12 等不同格式
- RGB：由紅、綠、藍三種顏色組成的彩色圖像格式，按每種顏色的位寬分為 RGB888、RGB565 等格式
- YUV：由亮度和色度組成的彩色圖像格式，按資料排列方式分為 YUV444、YUV422、YUV420 等格式
- AF：自動對焦
- AWB：自動白平衡
- AE：自動曝光
- HIST：長條圖
- BF：拜耳域降噪
- BLC：黑電平校正
- LSC：鏡頭陰影校正
- CCM：色彩校正矩陣

## 功能概述
ISP 驅動程式提供以下服務：
- 資源配置 - 涵蓋如何通過正確的配置來分配 ISP 資源，以及完成工作後如何回收資源。
- 啟用和禁用 ISP - 涵蓋如何啟用和禁用 ISP 處理器。
- 單次與連續 AF 資料統計 - 涵蓋如何單次或連續獲取 AF 統計資訊。
- 單次與連續 AWB 資料統計 - 涵蓋如何單次或連續獲取 AWB 白塊統計資訊。
- 單次與連續 AE 資料統計 - 涵蓋如何單次或連續獲取 AE 統計資訊。
- 單次與連續長條圖資料統計 - 涵蓋如何單次或連續獲取長條圖統計資訊。
- ISP BF 控制器 - 涵蓋如何啟用和配置 BF 功能。
- ISP BLC 控制器 - 涵蓋如何啟用和配置 BLC 功能。
- ISP LSC 控制器 - 涵蓋如何啟用和配置 LSC 功能。
- 配置 CCM - 涵蓋如何配置 CCM。
- ISP 去馬賽克控制器 - 涵蓋如何配置去馬賽克功能。
- 啟用 gamma 校正 - 涵蓋如何啟用和配置 gamma 校正。
- ISP 銳化控制器 - 涵蓋如何配置銳化功能。
- 註冊事件回呼函數 - 涵蓋如何將用戶特定代碼掛接到 ISP 驅動事件回檔。
- 執行緒安全 - 列出了驅動程式中執行緒安全的 API。
- Kconfig 選項 - 列出了支援的 Kconfig 選項，這些選項可以對驅動程式產生不同影響。
- IRAM 安全 - 描述了當 cache 被禁用時，如何使 ISP 中斷和控制功能正常工作。

